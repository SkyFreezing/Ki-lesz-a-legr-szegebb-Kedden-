<script>
  const nevek = [
    "MazoB", "Stim", "Dart", "Pukkanto", "Sunyi",
    "Sz√ºrkeR√≥kaFarkas", "Sky", "Gy≈ëriSex", "Vito", "Thomzon"
  ];

  let szavazatok = {};

  const beszolasokAlap = [
    "Biztos?",
    "Nem ink√°bb B√©?",
    "Szerintem t√©vedsz!",
    "B -t nem ismered?"
  ];

  // üîÅ Szavazatok bet√∂lt√©se ind√≠t√°skor
  function betoltSzavazatok() {
    const mentett = localStorage.getItem("szavazatok");
    if (mentett) {
      szavazatok = JSON.parse(mentett);
    } else {
      nevek.forEach(n => szavazatok[n] = 0);
    }
  }

  // üíæ Ment√©s b√∂ng√©sz≈ëbe
  function mentSzavazatok() {
    localStorage.setItem("szavazatok", JSON.stringify(szavazatok));
  }

  function valasztottNev() {
    const nev = document.getElementById("valaszto").value;
    const output = document.getElementById("output");
    const beszolasok = document.getElementById("beszolasok");
    const extra = document.getElementById("extra");
    const taps = document.getElementById("taps");
    const gomb = document.getElementById("szavazGomb");

    output.textContent = "";
    beszolasok.textContent = "";
    extra.textContent = "";
    gomb.style.display = nev ? "inline-block" : "none";

    if (!nev) return;

    output.textContent = nev;

    if (nev === "MazoB") {
      taps.currentTime = 0;
      taps.play();
      confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
    } else {
      beszolasok.innerHTML = beszolasokAlap.map(uzenet => `<div>${uzenet}</div>`).join("");
    }

    if (nev === "Thomzon") {
      extra.textContent = "≈ê volt fideszes, vigy√°zz vele!";
    }

    if (nev === "Stim") {
      extra.innerHTML = `
        <div>Lehets√©ges, de nem ≈ë a helyes v√°lasz.</div>
        <div>≈ê m√°r nem iszik annyit.</div>
      `;
    }

    frissitsSzavazatok();
  }

  function szavaz() {
    const nev = document.getElementById("valaszto").value;
    if (nev) {
      szavazatok[nev]++;
      mentSzavazatok();
      frissitsSzavazatok();
    }
  }

  function frissitsSzavazatok() {
    const div = document.getElementById("szavazatok");
    let tartalom = "<h3>Szavazatok √°ll√°sa:</h3>";
    for (const [nev, szam] of Object.entries(szavazatok)) {
      tartalom += `<div>${nev}: ${szam} szavazat</div>`;
    }
    div.innerHTML = tartalom;
  }

  // üöÄ Ind√≠t√°skor bet√∂lt√©s
  betoltSzavazatok();
  frissitsSzavazatok();
</script>
